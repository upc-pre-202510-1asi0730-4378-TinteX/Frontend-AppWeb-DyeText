var E=Object.defineProperty;var k=(o,e,s)=>e in o?E(o,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[e]=s;var h=(o,e,s)=>k(o,typeof e!="symbol"?e+"":e,s);import{h as c}from"./http.instance-t2F9Yq3_.js";import{_ as w,e as d,w as y,a as l,g as p,b as n,d as m,k as f,i as V,t as T,o as u}from"./index-PoYZxlwP.js";import"./index-xsH4HHeE.js";class b{constructor(){h(this,"resourceEndPoint","https://backend-dyetex.onrender.com/api/v1/profiles")}getProfile(e){return c.get(`${this.resourceEndPoint}/${e}`).then(s=>s.data)}updateProfile(e,s){return c.put(`${this.resourceEndPoint}/${e}`,s)}}const x={data(){return{profile:{},originalProfile:{},isEditing:!1,themes:[{label:"Claro",value:"light"},{label:"Oscuro",value:"dark"}]}},async created(){const o=new b;this.profile=await o.getProfile("1"),this.originalProfile={...this.profile},this.applyTheme(this.profile.theme)},methods:{onChangePassword(){this.$toast.add({severity:"info",summary:"Funcionalidad",detail:"Funcionalidad de cambio de contraseña",life:3e3})},async saveProfile(){await new b().updateProfile(this.profile.id,this.profile),this.isEditing=!1,this.originalProfile={...this.profile},this.$toast.add({severity:"success",summary:"Perfil actualizado",detail:"Los cambios han sido guardados",life:3e3})},cancelEdit(){this.profile={...this.originalProfile},this.isEditing=!1},onThemeChange(){this.applyTheme(this.profile.theme)},applyTheme(o){document.body.classList.remove("theme-light","theme-dark"),document.body.classList.add(`theme-${o}`)},async toggleTheme(){this.profile.theme=this.profile.theme==="light"?"dark":"light",this.applyTheme(this.profile.theme),await new b().updateProfile(this.profile.id,this.profile),this.$toast.add({severity:"success",summary:"Tema actualizado",detail:`Tema cambiado a ${this.profile.theme}`,life:2e3})}}},N={class:"profile-header"},U={class:"p-fluid p-formgrid p-grid"},_={class:"p-field p-col-12 p-md-6"},B={class:"p-field p-col-12 p-md-6"},I={class:"p-field p-col-12 p-md-6"},L={class:"p-field p-col-12 p-md-6"},M={class:"p-field p-col-12 p-md-6",style:{display:"flex","align-items":"center",gap:"0.5rem"}},S={style:{flex:"1"}},z={class:"profile-actions"};function F(o,e,s,O,i,r){const a=m("pv-button"),v=m("pv-input-text"),g=m("pv-tag"),C=m("pv-dropdown"),P=m("pv-card");return u(),d(P,{class:"profile-card"},{title:y(()=>[l("div",N,[e[6]||(e[6]=l("span",{class:"pi pi-user profile-avatar"},null,-1)),l("span",null,T(i.isEditing?"Editar Perfil":"Perfil de Usuario"),1),i.isEditing?f("",!0):(u(),d(a,{key:0,icon:"pi pi-pencil",class:"p-button-text edit-btn",onClick:e[0]||(e[0]=t=>i.isEditing=!0)}))])]),content:y(()=>[l("form",{onSubmit:e[5]||(e[5]=V((...t)=>r.saveProfile&&r.saveProfile(...t),["prevent"]))},[l("div",U,[l("div",_,[e[7]||(e[7]=l("label",{for:"full_name"},"Nombre completo",-1)),e[8]||(e[8]=p()),e[9]||(e[9]=l("br",null,null,-1)),n(v,{id:"full_name",modelValue:i.profile.full_name,"onUpdate:modelValue":e[1]||(e[1]=t=>i.profile.full_name=t),disabled:!i.isEditing},null,8,["modelValue","disabled"])]),l("div",B,[e[10]||(e[10]=l("label",{for:"email"},"Email",-1)),e[11]||(e[11]=p()),e[12]||(e[12]=l("br",null,null,-1)),n(v,{id:"email",modelValue:i.profile.email,"onUpdate:modelValue":e[2]||(e[2]=t=>i.profile.email=t),disabled:!i.isEditing},null,8,["modelValue","disabled"])]),l("div",I,[e[13]||(e[13]=l("label",{for:"phone"},"Teléfono",-1)),e[14]||(e[14]=p()),e[15]||(e[15]=l("br",null,null,-1)),n(v,{id:"phone",modelValue:i.profile.phone,"onUpdate:modelValue":e[3]||(e[3]=t=>i.profile.phone=t),disabled:!i.isEditing},null,8,["modelValue","disabled"])]),l("div",L,[e[16]||(e[16]=l("label",null,"Membresía",-1)),e[17]||(e[17]=p()),e[18]||(e[18]=l("br",null,null,-1)),n(g,{value:i.profile.membership_active?"Activa":"Inactiva",severity:i.profile.membership_active?"success":"danger"},null,8,["value","severity"])]),l("div",M,[l("div",S,[e[19]||(e[19]=l("label",{for:"theme"},"Tema",-1)),e[20]||(e[20]=p()),e[21]||(e[21]=l("br",null,null,-1)),n(C,{id:"theme",modelValue:i.profile.theme,"onUpdate:modelValue":e[4]||(e[4]=t=>i.profile.theme=t),options:i.themes,"option-label":"label","option-value":"value",onChange:r.onThemeChange,disabled:!i.isEditing},null,8,["modelValue","options","onChange","disabled"]),n(g,{value:i.profile.theme==="light"?"Claro":"Oscuro",severity:i.profile.theme==="light"?"info":"warning",style:{"margin-top":"0.5rem"}},null,8,["value","severity"])]),i.isEditing?(u(),d(a,{key:0,label:`Cambiar a tema ${i.profile.theme==="light"?"oscuro":"claro"}`,icon:"pi pi-refresh",class:"p-button-secondary",type:"button",onClick:r.toggleTheme,style:{"white-space":"nowrap"}},null,8,["label","onClick"])):f("",!0)]),e[22]||(e[22]=p()),e[23]||(e[23]=l("br",null,null,-1))]),l("div",z,[n(a,{label:"Cambiar contraseña",icon:"pi pi-key",class:"p-button-secondary",type:"button",onClick:r.onChangePassword},null,8,["onClick"]),i.isEditing?(u(),d(a,{key:0,label:"Guardar",icon:"pi pi-save",class:"p-button-success",type:"submit"})):f("",!0),i.isEditing?(u(),d(a,{key:1,label:"Cancelar",icon:"pi pi-times",class:"p-button-text",type:"button",onClick:r.cancelEdit},null,8,["onClick"])):f("",!0)])],32)]),_:1})}const q=w(x,[["render",F],["__scopeId","data-v-de30ddc1"]]);export{q as default};
