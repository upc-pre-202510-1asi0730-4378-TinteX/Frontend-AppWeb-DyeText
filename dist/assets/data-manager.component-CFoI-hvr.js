import{_ as g,l as b,c as u,a as y,b as t,t as C,w as o,d as c,m as v,k as _,F as p,r as k,o as m,e as w}from"./index-PoYZxlwP.js";const q={name:"data-manager",inheritAttrs:!1,props:{items:{type:Array,required:!0},title:{type:{singular:"",plural:""},required:!0},dynamic:{type:Boolean,default:!1},columns:{type:Array,default:[]}},emits:["new-item-requested","edit-item-requested","delete-item-requested","delete-selected-items-requested"],data(){return{selectedItems:[],filters:null}},methods:{initFilters(){this.filters={global:{value:null,matchMode:b.CONTAINS}}},newItem(){this.$emit("new-item-requested")},confirmDeleteSelected(){this.$confirm.require({message:`Are you sure you want to delete the selected ${this.title.plural}?`,header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectClass:"p-button-secondary p-button-outlined",rejectLabel:"Cancel",acceptLabel:"Delete",acceptClass:"p-button-danger",accept:()=>this.$emit("delete-selected-items-requested",this.selectedItems),reject:()=>{}})},exportToCsv(){this.$refs.dt.exportCSV()},editItem(l){this.$emit("edit-item-requested",l)},confirmDeleteItem(l){this.$confirm.require({message:`Are you sure you want to delete this ${this.title.singular}?`,header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectClass:"p-button-secondary p-button-outlined",rejectLabel:"Cancel",acceptLabel:"Delete",acceptClass:"p-button-danger",accept:()=>this.$emit("delete-item-requested",l),reject:()=>{}})}},created(){this.initFilters()}};function x(l,r,a,I,s,i){const n=c("pv-button"),f=c("pv-toolbar"),d=c("pv-column"),h=c("pv-data-table");return m(),u(p,null,[y("h3",null,"Manage "+C(a.title.plural),1),t(f,{class:"mb-4"},{start:o(()=>[t(n,{class:"mr-2",icon:"pi pi-plus",label:"New",severity:"success",onClick:i.newItem},null,8,["onClick"]),t(n,{disabled:!s.selectedItems||!s.selectedItems.length,icon:"pi pi-trash",label:"Delete",severity:"danger",onClick:i.confirmDeleteSelected},null,8,["disabled","onClick"])]),end:o(()=>[t(n,{icon:"pi pi-download",label:"Export",severity:"help",onClick:r[0]||(r[0]=e=>i.exportToCsv(e))})]),_:1}),t(h,{ref:"dt",selection:s.selectedItems,"onUpdate:selection":r[1]||(r[1]=e=>s.selectedItems=e),filters:s.filters,paginator:!0,rows:10,"rows-per-page-options":[5,10,20],value:a.items,"current-page-report-template":"Showing {first} to {last} of {totalRecords} ${{title.plural}}","data-key":"id","paginator-template":"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown"},{default:o(()=>[t(d,{exportable:!1,"selection-mode":"multiple",style:{width:"3rem"}}),v(l.$slots,"custom-columns"),a.dynamic?(m(!0),u(p,{key:0},k(a.columns,e=>(m(),w(d,{key:e.field,field:e.field,header:e.header},null,8,["field","header"]))),128)):_("",!0),t(d,{exportable:!1,style:{"min-width":"8rem"}},{body:o(e=>[t(n,{icon:"pi pi-trash",outlined:"",rounded:"",severity:"danger",onClick:D=>i.confirmDeleteItem(e.data)},null,8,["onClick"])]),_:1})]),_:3},8,["selection","filters","value"])],64)}const P=g(q,[["render",x]]);export{P as D};
