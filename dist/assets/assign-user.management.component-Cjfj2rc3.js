import{A as p,a as g}from"./assign-user.service-BnBGoOrr.js";import{D as V}from"./data-manager.component-CFoI-hvr.js";import{C as S}from"./create-and-edit.component-WISuARUW.js";import{_ as A,e as I,w as u,a as t,b as a,d as U,n as c,o as h,c as b,t as l,F as C,r as q,g as f}from"./index-PoYZxlwP.js";import{v as E}from"./v4-C6aID195.js";import"./http.instance-t2F9Yq3_.js";import"./index-xsH4HHeE.js";const D={name:"assign-user-item-create-and-edit",components:{CreateAndEdit:S},props:{item:null,visible:!1},emits:["cancel-requested","save-requested"],data(){return{submitted:!1}},methods:{onCancelRequested(){this.$emit("cancel-requested")},onSaveRequested(){this.submitted=!0,this.item.card_id="",this.item.subscription_active=!1,this.$emit("save-requested",this.item)}}},R={class:"p-fluid"},y={class:"field mt-5"},w={class:"field"},k={class:"field"},B={class:"field"},N={class:"field"},P={class:"field"},x={class:"field"};function F(s,e,i,_,o,r){const m=U("pv-input-text"),n=U("pv-float-label"),v=U("create-and-edit");return h(),I(v,{entity:i.item,visible:i.visible,edit:s.$props.edit,"entity-name":"AssignUser",onCancelActionRequested:r.onCancelRequested,onSaveActionRequested:r.onSaveRequested},{content:u(()=>[t("div",R,[t("div",y,[a(n,null,{default:u(()=>[a(m,{id:"name",modelValue:i.item.name,"onUpdate:modelValue":e[0]||(e[0]=d=>i.item.name=d),class:c({"p-invalid":o.submitted&&!i.item.name})},null,8,["modelValue","class"]),e[7]||(e[7]=t("label",{for:"name"},"Name",-1))]),_:1})]),t("div",w,[a(n,null,{default:u(()=>[a(m,{id:"email",modelValue:i.item.email,"onUpdate:modelValue":e[1]||(e[1]=d=>i.item.email=d),class:c({"p-invalid":o.submitted&&!i.item.email})},null,8,["modelValue","class"]),e[8]||(e[8]=t("label",{for:"email"},"Email",-1))]),_:1})]),t("div",k,[a(n,null,{default:u(()=>[a(m,{id:"phone",modelValue:i.item.phone,"onUpdate:modelValue":e[2]||(e[2]=d=>i.item.phone=d),class:c({"p-invalid":o.submitted&&!i.item.phone})},null,8,["modelValue","class"]),e[9]||(e[9]=t("label",{for:"phone"},"Phone",-1))]),_:1})]),t("div",B,[a(n,null,{default:u(()=>[a(m,{id:"start_date",modelValue:i.item.start_date,"onUpdate:modelValue":e[3]||(e[3]=d=>i.item.start_date=d),class:c({"p-invalid":o.submitted&&!i.item.start_date})},null,8,["modelValue","class"]),e[10]||(e[10]=t("label",{for:"start_date"},"Start Date",-1))]),_:1})]),t("div",N,[a(n,null,{default:u(()=>[a(m,{id:"plant",modelValue:i.item.plant,"onUpdate:modelValue":e[4]||(e[4]=d=>i.item.plant=d),class:c({"p-invalid":o.submitted&&!i.item.plant})},null,8,["modelValue","class"]),e[11]||(e[11]=t("label",{for:"plant"},"Plant",-1))]),_:1})]),t("div",P,[a(n,null,{default:u(()=>[a(m,{id:"role",modelValue:i.item.role,"onUpdate:modelValue":e[5]||(e[5]=d=>i.item.role=d),class:c({"p-invalid":o.submitted&&!i.item.role})},null,8,["modelValue","class"]),e[12]||(e[12]=t("label",{for:"role"},"Role",-1))]),_:1})]),t("div",x,[a(n,null,{default:u(()=>[a(m,{id:"permission",modelValue:i.item.permission,"onUpdate:modelValue":e[6]||(e[6]=d=>i.item.permission=d),class:c({"p-invalid":o.submitted&&!i.item.permission})},null,8,["modelValue","class"]),e[13]||(e[13]=t("label",{for:"permission"},"Permission",-1))]),_:1})])])]),_:1},8,["entity","visible","edit","onCancelActionRequested","onSaveActionRequested"])}const z=A(D,[["render",F]]),L={name:"assign-user-management",components:{AssignUserItemCreateAndEditDialog:z,DataManager:V},data(){return{title:{singular:"AssignUser",plural:"AssignUsers"},assignUsers:[],assignUser:new g({}),selectedAssignUsers:[],assignUserService:null,createAndEditDialogIsVisible:!1,isEdit:!1,submitted:!1}},methods:{notifySuccessfulAction(s){this.$toast.add({severity:"success",summary:"Success",detail:s,life:3e3})},findIndexById(s){return this.assignUsers.findIndex(e=>e.id===s)},onNewItem(){this.assignUser=new g({}),this.isEdit=!1,this.submitted=!1,this.createAndEditDialogIsVisible=!0},onEditItem(s){this.assignUser=new g(s),this.isEdit=!0,this.submitted=!1,this.createAndEditDialogIsVisible=!0},onDeleteItem(s){this.assignUser={...s},this.deleteAssignUser()},onDeleteSelectedItems(s){this.selectedAssignUsers=s,this.deleteSelectedAssignUsers()},onCancelRequested(){this.createAndEditDialogIsVisible=!1,this.submitted=!1,this.isEdit=!1},onSaveRequested(s){this.submitted=!0,s.name.trim()&&(s.id?this.updateAssignUser():(this.assignUser.id||(this.assignUser.id=E()),this.createAssignUser()),this.createAndEditDialogIsVisible=!1,this.isEdit=!1)},createAssignUser(){this.assignUserService.create(this.assignUser).then(s=>{const e=new g(s.data);this.assignUsers.push(e),this.notifySuccessfulAction("AssignUser Created")}).catch(s=>console.error(s))},updateAssignUser(){this.assignUserService.update(this.assignUser.id,this.assignUser).then(s=>{const e=this.findIndexById(this.assignUser.id);this.assignUsers[e]=new g(s.data),this.notifySuccessfulAction("AssignUser Updated")}).catch(s=>console.error(s))},deleteAssignUser(){this.assignUserService.delete(this.assignUser.id).then(()=>{const s=this.findIndexById(this.assignUser.id);this.assignUsers.splice(s,1),this.notifySuccessfulAction("AssignUser Deleted")}).catch(s=>console.error(s))},deleteSelectedAssignUsers(){const s=this.selectedAssignUsers.map(e=>this.assignUserService.delete(e.id));Promise.all(s).then(()=>{this.assignUsers=this.assignUsers.filter(e=>!this.selectedAssignUsers.some(i=>i.id===e.id)),this.notifySuccessfulAction("AssignUsers Deleted")}).catch(e=>console.error(e))}},created(){this.assignUserService=new p,this.assignUserService.getAll().then(s=>{this.assignUsers=s.data.map(e=>new g(e))}).catch(s=>console.error(s))}},M={class:"assign-user-container"},T={class:"page-title"},j={class:"cards-grid"},G={class:"actions"},H=["onClick"],J=["onClick"];function K(s,e,i,_,o,r){const m=U("assign-user-item-create-and-edit-dialog");return h(),b("div",M,[t("h2",T,l(s.$t("assignUser.title")),1),t("button",{class:"add-btn",onClick:e[0]||(e[0]=(...n)=>r.onNewItem&&r.onNewItem(...n))},l(s.$t("assignUser.add")),1),t("div",j,[(h(!0),b(C,null,q(o.assignUsers,n=>(h(),b("div",{key:n.id,class:"card"},[t("h3",null,l(n.name),1),t("p",null,[t("strong",null,l(s.$t("assignUser.email"))+":",1),f(" "+l(n.email),1)]),t("p",null,[t("strong",null,l(s.$t("assignUser.phone"))+":",1),f(" "+l(n.phone),1)]),t("p",null,[t("strong",null,l(s.$t("assignUser.startDate"))+":",1),f(" "+l(n.start_date),1)]),t("p",null,[t("strong",null,l(s.$t("assignUser.plant"))+":",1),f(" "+l(n.plant),1)]),t("p",null,[t("strong",null,l(s.$t("assignUser.role"))+":",1),f(" "+l(n.role),1)]),t("p",null,[t("strong",null,l(s.$t("assignUser.permission"))+":",1),f(" "+l(n.permission),1)]),t("div",G,[t("button",{onClick:v=>r.onEditItem(n)},l(s.$t("assignUser.edit")),9,H),t("button",{onClick:v=>r.onDeleteItem(n)},l(s.$t("assignUser.delete")),9,J)])]))),128))]),a(m,{edit:o.isEdit,item:o.assignUser,visible:o.createAndEditDialogIsVisible,onCancelRequested:r.onCancelRequested,onSaveRequested:e[1]||(e[1]=n=>r.onSaveRequested(n))},null,8,["edit","item","visible","onCancelRequested"])])}const ee=A(L,[["render",K],["__scopeId","data-v-ea9db78d"]]);export{ee as default};
