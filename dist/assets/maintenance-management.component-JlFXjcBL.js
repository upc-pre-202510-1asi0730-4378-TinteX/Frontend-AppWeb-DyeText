var S=Object.defineProperty;var y=(e,n,a)=>n in e?S(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a;var v=(e,n,a)=>y(e,typeof n!="symbol"?n+"":n,a);import{a as p,T as b}from"./textileMachine.entity-DI3Gu5sr.js";import{h}from"./http.instance-t2F9Yq3_.js";import{A as k,a as P}from"./assign-user.service-BnBGoOrr.js";import{_ as I,c,k as d,a as t,t as i,g as r,o as l,e as w,F as _,r as C,d as A}from"./index-PoYZxlwP.js";import"./index-xsH4HHeE.js";class E{constructor(){v(this,"resourceEndPoint","/machine-informations")}getAll(){return h.get(this.resourceEndPoint)}getById(n){return h.get(`${this.resourceEndPoint}/${n}`)}create(n){return h.post(this.resourceEndPoint,n)}update(n,a){return h.put(`${this.resourceEndPoint}/${n}`,a)}delete(n){return h.delete(`${this.resourceEndPoint}/${n}`)}getByName(n){return h.get(`${this.resourceEndPoint}?name=${n}`)}}class U{constructor({id:n="",time_spent:a="",day_progress:f="",failure_rate:o="",amount_failure:s="",user_id:u="",temperature:m="",vibration:g="",energy:M="",speed:$=""}){this.id=n,this.time_spent=a,this.day_progress=f,this.failure_rate=o,this.amount_failure=s,this.user_id=u,this.temperature=m,this.vibration=g,this.energy=M,this.speed=$}}const B="/assets/speed-0xaBPSZa.png",T="/assets/energia-C8cAWPi6.png",N="/assets/temperature-CJpoitvC.png",z="/assets/vibration-ppz0c_Gk.png",O={name:"maintenance-machine-status",props:{machine:p,machinesInformation:{type:Array,default:()=>[]}},data(){return{textileMachines:[],users:[],textileMachineService:null,assignUserService:null,showProductionStatus:!1}},computed:{machineInfo(){return console.log("machine_information_id:",this.machine.machine_information_id),console.log("machinesInformation:",this.machinesInformation),this.machine?this.machinesInformation.find(e=>String(e.id)===String(this.machine.machine_information_id)):null},getUserOfMachine(){return this.machineInfo?this.users.find(e=>String(e.id)===String(this.machineInfo.user_id)):null}},methods:{showProduction(){this.showProductionStatus=!0,this.$nextTick(()=>{const e=this.$refs.scrollContainer;e&&e.scrollTo({top:e.scrollHeight,behavior:"smooth"})})}},created(){this.textileMachineService=new b,this.assignUserService=new k,this.textileMachineService.getAll().then(e=>{this.textileMachines=e.data.map(n=>new p(n))}).catch(e=>{console.log(e)}),this.assignUserService.getAll().then(e=>{this.users=e.data.map(n=>new P(n))}).catch(e=>{console.log(e)})}},V={key:0,class:"machine-status-detail-container",ref:"scrollContainer"},D={class:"flex"},F={key:0,class:"machine-info-container"},H={class:"machine-info"},W={class:"machine-info"},G={class:"machine-info"},J={class:"machine-info"},L={key:1},R={class:"person-manager-container"},Z={class:"person-manager"},j={key:0},q={class:"btns-machines-config-container"},K={class:"btn btn-scn-cnt third-btn"},Q={class:"btn btn-scn-cnt fourth-btn active"},X={key:0,style:{"margin-top":"50px"}};function Y(e,n,a,f,o,s){return a.machine?(l(),c("div",V,[t("div",D,[t("i",{class:"pi pi-arrow-circle-left",style:{cursor:"pointer"},onClick:n[0]||(n[0]=u=>e.$emit("close"))}),t("h2",null,i(e.$t("machine"))+" "+i(e.$t("home.status")),1)]),t("div",null,[r(i(e.$t("machine"))+" "+i(e.$t("monitoring.number"))+" ",1),t("strong",null,i(a.machine.number_machine),1)]),t("div",null,[n[11]||(n[11]=t("h2",{style:{"font-size":"50px"}},"Detail",-1)),s.machineInfo?(l(),c("div",F,[t("div",H,[n[4]||(n[4]=t("img",{src:B,alt:"temperature"},null,-1)),t("span",null,[r(i(e.$t("maintenance.speed"))+": ",1),n[3]||(n[3]=t("br",null,null,-1)),r(" "+i(s.machineInfo.speed)+" RPM",1)])]),t("div",W,[n[6]||(n[6]=t("img",{src:T,alt:"energy"},null,-1)),t("span",null,[r(i(e.$t("maintenance.energy"))+": ",1),n[5]||(n[5]=t("br",null,null,-1)),r(" "+i(s.machineInfo.energy)+" kWh",1)])]),t("div",G,[n[8]||(n[8]=t("img",{src:N,alt:"temperature"},null,-1)),t("span",null,[r(i(e.$t("maintenance.temperature"))+": ",1),n[7]||(n[7]=t("br",null,null,-1)),r(" "+i(s.machineInfo.temperature)+" Â°C",1)])]),t("div",J,[n[10]||(n[10]=t("img",{src:z,alt:"temperature"},null,-1)),t("span",null,[r(i(e.$t("maintenance.vibration"))+": ",1),n[9]||(n[9]=t("br",null,null,-1)),r(" "+i(s.machineInfo.vibration)+" Hz",1)])])])):(l(),c("div",L)),t("h3",null,i(e.$t("maintenance.responsible-person")),1),t("div",R,[t("ul",Z,[s.getUserOfMachine?(l(),c("li",j,i(s.getUserOfMachine.name),1)):d("",!0)])]),t("div",q,[t("button",{class:"btn btn-frt-cnt first-btn",onClick:n[1]||(n[1]=u=>{o.showProductionStatus=!0,s.showProduction})},i(e.$t("maintenance.production-status")),1),t("button",{class:"btn btn-frt-cnt second-btn active",onClick:n[2]||(n[2]=u=>o.showProductionStatus=!0)},i(e.$t("maintenance.history")),1),t("div",null,[t("button",K,i(e.$t("off")),1),t("button",Q,i(e.$t("on")),1)])])]),o.showProductionStatus&&s.machineInfo?(l(),c("div",X,[t("div",null,[t("h2",null,i(e.$t("maintenance.current-status")),1),t("span",null,i(e.$t("home.status"))+": "+i(a.machine.status),1),n[12]||(n[12]=r()),n[13]||(n[13]=t("br",null,null,-1)),t("span",null,i(e.$t("maintenance.time-spent"))+": "+i(s.machineInfo.time_spent),1)]),t("div",null,[t("h2",null,i(e.$t("maintenance.daily-metrics")),1),t("span",null,i(e.$t("maintenance.day-progress"))+": "+i(s.machineInfo.day_progress),1),n[14]||(n[14]=t("br",null,null,-1)),t("span",null,i(e.$t("maintenance.failure-rate"))+": "+i(s.machineInfo.failure_rate),1)])])):d("",!0)],512)):d("",!0)}const x=I(O,[["render",Y],["__scopeId","data-v-0f0b1039"]]),nn={name:"maintenance-management",components:{MaintenanceMachineStatus:x},data(){return{textileMachines:[],machinesInformation:[],textileMachineService:null,machineInformationService:null,selectedMachine:null}},methods:{getMachineInformation(e){const n=this.machinesInformation.find(a=>a.id===e);return n?n.amount_failure:"-"},selectMachine(e){console.log("Machine selected:",e),this.selectedMachine=e}},created(){this.textileMachineService=new b,this.machineInformationService=new E,this.textileMachineService.getAll().then(e=>{this.textileMachines=e.data.map(n=>new p(n))}).catch(e=>{console.log(e)}),this.machineInformationService.getAll().then(e=>{this.machinesInformation=e.data.map(n=>new U(n))}).catch(e=>{console.log(e)})}},en={class:"assets-container"},tn={class:"assets-list-container"},sn={class:"assets-list"},an=["onClick"],on={class:"machine-info"},rn={class:"failure-info-container"};function ln(e,n,a,f,o,s){const u=A("maintenance-machine-status");return l(),c(_,null,[t("div",en,[n[2]||(n[2]=t("h2",null,"Assets",-1)),t("div",tn,[t("ul",sn,[(l(!0),c(_,null,C(o.textileMachines,m=>(l(),c("li",{class:"assets-item",key:m.id,onClick:g=>s.selectMachine(m)},[t("div",on,[n[1]||(n[1]=t("div",null,[t("div",{class:"background-i"},[t("i",{class:"pi pi-cog"})])],-1)),t("div",null,i(m.number_machine),1)]),t("div",rn,[t("span",null,i(e.$t("maintenance.estimated-failure")),1),r(" "+i(s.getMachineInformation(m.machine_information_id))+" ",1),t("span",null,i(e.$t("maintenance.days")),1)])],8,an))),128))])])]),o.selectedMachine?(l(),w(u,{key:0,machine:o.selectedMachine,"machines-information":o.machinesInformation,onClose:n[0]||(n[0]=m=>o.selectedMachine=null)},null,8,["machine","machines-information"])):d("",!0)],64)}const pn=I(nn,[["render",ln],["__scopeId","data-v-dee42217"]]);export{pn as default};
